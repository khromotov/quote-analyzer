#set text(font: "Times New Roman", size: 14pt)

#align(center, text(14pt)[
  ПРАВИТЕЛЬСТВО РОССИЙСКОЙ ФЕДЕРАЦИИ
  
  ФГАОУ ВО НАЦИОНАЛЬНЫЙ ИССЛЕДОВАТЕЛЬСКИЙ УНИВЕСИТЕТ
  
  "ВЫСШАЯ ШКОЛА ЭКОНОМИКИ"
])



#move(dy: 20pt)[#align(center, text(14pt)[

  Факультет компьютерных наук

  Образовательная программа "Прикладная математика и информатика"
])]


#move(dy: 120pt)[#align(center)[
  #set text(weight: "bold")
  
  Отчет о программном проекте на тему: \
  Математическое и алгоритмическое программное обеспечение для анализа котировок ценных бумаг
]]

#move(dy: 170pt)[#text(weight: "bold")[Выполнил студент:]
#grid(
  columns: (1fr, 1fr),
  align(left)[
    группы \#БПМИ239, 2 курса
  ],
  align(center)[
    Хромотов Андрей Александрович
  ]
)

#text(weight: "bold")[Принял руководитель проекта:]
#grid(
  columns: (1fr, 1fr),
  align(left)[
    Куренков Владимир Вячеславович \
    Штатный преподаватель
    Департамент больших данных и информационного поиска НИУ ВШЭ
  ],
  align(center)[
  ]
)]


#align(center + bottom)[
  Москва  2025
]


///sets
#set page(numbering: "- 1 -")
#set heading(numbering: "1.")





#pagebreak()

#outline(title: [Содержание])

#pagebreak()

= Аннотация

#text()[
  В данной курсовой работе рассматриваются классические методы технического анализа (скользящие средние, MACD, Ichimoku и другие), используемые для выявления трендов и точек потенциального разворота котировок. В рамках проекта разработано программное обеспечение, позволяющее автоматически загружать исторические данные, выполнять расчёт выбранных индикаторов и формировать наглядные графики. Система ориентирована на гибкость и модульность: пользователь может при необходимости добавлять собственные индикаторы, а также интегрировать решение с реальными источниками котировок.

  Практическая ценность заключается в ускорении и упрощении аналитических процессов. Реализация базовых индикаторов в единой программе даёт трейдерам и аналитикам удобный инструмент для оценки текущего состояния рынка и принятия решений о входе и выходе из позиций. Предусмотрена визуализация основных сигналов, что облегчает интерпретацию результатов и позволяет быстро адаптировать стратегию под меняющиеся условия торговли.
]

== Ключевые слова

#text()[
  Анализ ценных бумаг, алгоритмы обработки финансовых данных, математическое моделирование, прогнозирование котировок, технический анализ.
]

#pagebreak()

= Введение 

#text()[
  Современные финансовые рынки формируют обширные массивы данных, требующие применения эффективных методов анализа и прогнозирования. Волатильность котировок, нестабильность внешнеэкономических факторов и повсеместное распространение алгоритмических торговых систем приводят к тому, что традиционные подходы, основанные исключительно на субъективном опыте трейдера, часто оказываются недостаточными. Именно поэтому встаёт вопрос о создании программного обеспечения, способного автоматизировать сбор, очистку и анализ рыночных данных, а также предоставлять удобные инструменты для оценки рисков и формирования торговых сигналов.

Актуальность проекта усиливается тем, что всё большее число инвесторов и аналитиков обращаются к аналитическим методам машинного обучения и статистическим моделям — однако базовый технический анализ остаётся фундаментом при оценке краткосрочных и среднесрочных движений рынка. Снижение субъективного фактора и ускоренное принятие решений позволяют трейдеру быстрее реагировать на изменения динамики цен. При этом систематизированный подход к выбору параметров индикаторов и методам тестирования стратегий способствует повышению достоверности результатов.

Настоящий проект направлен на разработку комплексного программного инструмента, который автоматизирует типовые задачи технического анализа: от первичной предобработки данных до визуализации итоговых сигналов. Помимо этого, работа закладывает основу для дальнейшего развития, включая интеграцию математических моделей и реализацию стратегий алготрейдинга. Такой подход даёт возможность повышать точность и эффективность прогнозов, а также ускорять процесс принятия решений на различных сегментах финансового рынка.
]

== Актуальность проекта
#text()[
  Современный финансовый рынок непрерывно усложняется за счёт высокой волатильности, масштабной цифровизации и резкого увеличения числа частных инвесторов. В таких условиях интуитивные методы анализа часто уступают системному подходу, основанному на чёткой статистической обработке и автоматизации вычислений. Когда речь идёт о быстром принятии решений, колебания даже нескольких пунктов могут определять итоговую прибыльность или убыток по сделке. Именно поэтому возрастает спрос на специализированные решения, способные аккумулировать котировки из различных источников, фильтровать шумовые данные и предоставлять трейдерам и аналитикам удобные инструменты для оперативного обнаружения тенденций и разворотных паттернов.  

В то же время развитие вычислительных мощностей и программных библиотек по статистике и машинному обучению открывает возможности более глубокого анализа, чем традиционные ручные стратегии. Автоматическая оценка рисков, гибкая настройка индикаторов под разные рыночные условия и возможность тестирования торговых гипотез на исторических данных помогают снизить уровень субъективности. Таким образом, проект по созданию комплексного программного инструмента для технического анализа и математического моделирования выступает не только своевременным, но и практически востребованным решением, способным повысить эффективность принятия инвестиционных решений на финансовых рынках.
]


== Цель проекта
#text()[
 В ходе работы требуется изучить методы математического моделирования, технического анализа и алгоритмической обработки финансовых данных, затем создать на их основе программное обеспечение для комплексного анализа и прогнозирования котировок ценных бумаг. Разрабатываемый инструмент призван автоматизировать процесс выявления рыночных закономерностей, оценки рисков и генерации торговых сигналов, что позволит пользователям принимать более обоснованные инвестиционные решения.
]

== Практическая значимость
#text()[
  Практическая ценность разработанного решения заключается в том, что оно сочетает широкий спектр инструментов технического анализа и возможность гибкой интеграции с реальными источниками котировок. Подобный комплекс может оказаться востребован не только у опытных трейдеров, стремящихся повысить скорость и точность своих операций, но и у начинающих инвесторов, которым важно иметь под рукой наглядные и достоверные индикаторы для определения моментов входа и выхода. Благодаря использованию Python и популярных библиотек для работы с финансовыми данными обеспечивается относительная простота модификации и дальнейшего расширения функционала, что позволяет адаптировать систему к изменяющимся условиям рынка и растущим требованиям пользователей.

Автоматическая генерация отчётов, визуальные графики с нанесёнными индикаторами и встроенные механизмы фильтрации аномалий облегчает исследование рыночных ситуаций в режиме реального времени. Возможность быстрого бэктестинга исторических данных даёт специалистам и частным инвесторам дополнительный инструмент для проверки гипотез и корректировки стратегий. При этом тот факт, что система ориентирована на модульную архитектуру, позволяет при необходимости встраивать решения машинного обучения, сложные математические модели (например, для оценки волатильности) и дополнительные источники фундаментальной информации (новостные ленты, аналитические отчёты). Всё это расширяет спектр задач, которые могут быть решены с помощью данного программного комплекса, и повышает его потенциальную пользу для широкого круга участников финансовых рынков.
  ]

== Структура работы
#text()[
  Исследование начинается с краткого Введения, где обосновывается важность темы и описываются предпосылки к созданию программного инструмента для технического анализа. Далее в теоретическом блоке последовательно рассматриваются классические индикаторы (скользящие средние, MACD, Ichimoku и другие) и математические методы (например, модели портфельной оптимизации), которые лежат в основе разрабатываемого решения. После этого следует раздел, посвящённый Технической реализации, в котором детально описаны архитектурные решения, используемые библиотеки и ключевые принципы написания кода для загрузки, обработки и визуализации данных.

Отдельной главой вынесены Перспективы развития, где обсуждаются дальнейшие возможности расширения функционала — от глубокого изучения особенностей рынка с помощью машинного обучения до интеграции с брокерскими системами. Завершают работу разделы Оценки результатов и Заключения, подводящие итоги экспериментов и дающие общую оценку достигнутым целям. В Списке литературы приведены источники, использованные при подготовке проекта: от классических книг по техническому анализу до современных научных статей и документации к Python-библиотекам. Такой порядок изложения даёт целостное представление о путях решения поставленной задачи — от теоретических основ до практической проверки работоспособности системы и перспектив её дальнейшего совершенствования.
]

#pagebreak()

= Теоретический обзор литературы 
#text()[
  В процессе написания проекта необходимо изучить ряд моделей и технических идникаторов, приведенных ниже, а так же реализовать их в программе, структура которой и процесс ее написания будут описаны далее.
  == Технические индикаторы

  === Индикатор Ишимоку
    Ichimoku Kinko Hyo был предложен японским аналитиком Гоити Хосодой (известным под псевдонимом Ичимоку Сандзин) в 1930-е годы и изначально предназначался для прогнозирования динамики индекса Nikkei на Токийской бирже. Главная идея индикатора — комплексный анализ рынка для определения трендов, уровней поддержки/сопротивления и моментов входа в сделку. Структурно он состоит из пяти кривых и одной заштрихованной области между двумя из них, так называемого облака (Kumo).

    Для расчётов используются три характерные временные интервалы: короткий (обычно 9 периодов), средний (26) и более протяжённый (52). Считается, что именно такие настройки оптимально подходили к недельным данным Nikkei. Однако многие трейдеры меняют эти параметры, подстраивая индикатор под конкретные инструменты и таймфреймы.

    Индикатор Ишимоку формируется из пяти линий на графике. Облако - заштрихованная область между линиями может является сигналом к продаже или покупке. 
    #figure(image("pics/Ichimoku.jpeg", width: 80%))
    
    Построение линий:
    - #underline("Tenkan") (линия переворота) - определяется как полусумма максимума и минимума за короткий промежуток ($t_s$):
      $ "Tenkan"_t = (max_(tau in [t - t_s, t])("high"_tau) + min_(tau in [t - t_s; t])("low"_tau))/2, $
      где $"high"_tau$ - максимальная, а $"low"_tau$ - минимальная цена $tau$-го периода.

      Чем более крутая эта линия, тем ярче выражен текущий тренд.  

    - #underline("Kijun") (линия стандарта) - Аналогично Tenkan, но считается за средний промежуток времени ($t_m$):
      $ "Kijun"_t = (max_(tau in [t - t_m, t])("high"_tau) + min_(tau in [t - t_m; t])("low"_tau))/2, $

        Часто используется как индикатор направления рынка: если цена выше Kijun, преобладает "бычья" динамика и наоборот.
    
    - #underline("Senkou A") - вычисляется как среднее между Tenkan и Kijun и сдвигается на средний интервал ($t_m$):
      $ "SenkouA"_t = ("Tenkan"_(t - t_m) + "Kijun"_(t - t_m))/2. $

    - #underline("Senkou B") - сберет за основу экстремумы за "длинный" ($t_l$) промежуток и сдвигается вперед на "средний" интервал ($t_m$): 
      $ "SenkouB"_t = (max_(tau in [t - t_m - t_l, t - t_m])("high"_tau) + min_(tau in [t - t_m - t_l; t - t_m])("low"_tau))/2. $ 

    - #underline("Chikou") - линия цены, сдвинутая назад на "средний" интервал:
      $ "Chikou"_t = "close"_(t + t_m) $ - цена закрытия в момент $t + t_m$. 
    
      Считается, что пересечение Chikou с историческими значениями цены может сигнализировать о смене тренда.

    #text(style: "italic", weight: 600)[Торговые стратегии с индикатором Ишимоку:]
    Торговые сигналы в Ichimoku чаще всего сводятся к анализу пересечений Tenkan и Kijun (так называемые «золотые» и «мёртвые» кресты), выходу цены из облака, а также взаимному расположению линий Senkou A и Senkou B. Если цена пробивает облако снизу вверх, это часто интерпретируется как признак зарождения восходящего тренда, а выход сверху вниз — признак возможной нисходящей динамики. Кроме того, положение Chikou относительно цены помогает уточнять моменты входа и выхода: когда Chikou пересекает график снизу вверх, можно рассматривать это как подтверждение силы «бычьего» движения, и наоборот.

    Таким образом, Ichimoku Kinko Hyo объединяет в себе несколько индикаторов тренда и уровней поддержки/сопротивления, что позволяет трейдерам оценивать текущее состояние рынка одним взглядом на график и быстро принимать торговые решения. 

  === Скользящие средние (SMA, EMA)
    Скользящие средние считаются одним из наиболее востребованных инструментов технического анализа, поскольку они помогают сгладить ценовой ряд и выделить основную тенденцию, отсекая второстепенные колебания. При этом важно выбрать длину «окна», то есть количество периодов, за которое рассчитывается среднее. Этот параметр влияет на то, насколько чувствительно индикатор будет реагировать на смену тренда: чем меньше окно, тем более «быстрое» и волатильное получается скользящее среднее, и наоборот.

    #figure(image("pics/MA.jpeg", width: 60%))



    #let SMA = $#text("SMA", style: "italic", font: "Arial")$
    #let EMA = $#text("EMA", style: "italic", font: "Arial")$
    #let MACD = $#text("MACD", style: "italic", font: "Arial")$

    #text(style: "italic", weight: 600)[Простое скользящее среднее (SMA)]

    Простое скользящее среднее (Simple Moving Average) сводится к усреднению последних $N$ цен, обычно цены закрытия, без каких-либо дополнительных весов. Формально это сумма значений за выбранный период, делённая на их количество. Хотя такой подход интуитивно понятен и легко считается, его недостаток в том, что старые данные могут влиять на результат так же сильно, как и новые, что может приводить к некоторому «запаздыванию».
    $ SMA_t = 1/n sum^(n - 1)_(i = 0) p_(t - i), $
      где: 
      - $SMA_t$ — значение простого скользящего среднего в точке $t$.
      - $n$ — количество значений исходной функции для расчёта скользящего среднего (сглаживающий интервал), чем шире сглаживающий интервал, тем более плавным получается график функции.
      - $p_(t - i)$ — значение исходной функции в точке $t - i$.
    Из предыдущего своего значения простое скользящее среднее может быть получено по следующей рекуррентной формуле:
      $ SMA_t = SMA_(t - 1) - p_(t-n)/n + p_t/n $
    Вышеописанная формула показывает главные недостатки $SMA$:
      - Равенство весового коэффицента 1 - каждое событие равновесно, что может иногда плохо отображать действительность.
      - Двойная реакция на каждое значение - новое значение может слишком резко изменить показания.
    
    Поэтому стоит учитывать не только показания $SMA$.

    #text(style: "italic", weight: 600)[Экспоненциальное скользящее среднее (EMA)]

    Экспоненциальная версия (Exponential Moving Average) учитывает более свежие значения цены с большим весом. Это повышает отзывчивость индикатора на резкие изменения на рынке. Алгоритмически EMA рассчитывается так, что каждое новое значение вносит вклад пропорционально заданному коэффициенту затухания ($alpha$). Если этот коэффициент велик, индикатор будет «бросаться» за ценой активнее, что может оказаться полезным при быстром трендовом движении, но и повысит риск ложных сигналов во время боковой динамики.
    Экспоненциальное скользящее среднее вычиляется по формуле:
    $ EMA_t = alpha dot p_t + (1 - alpha) dot EMA_(t - 1), $
    где:
      - $EMA_t$ - значение экспоненциального скользящего среднего в точке $t$ (последнее значение, в случае временного ряда)
      - $EMA_(t - 1)$ - значение EMA в точке $t - 1$  (предыдущее значение в случае временного ряда)
      - $p_t$ - значение исходной функции в момент времени $t$
      - $alpha$ - сглаживающая константа, коэффициент характеризующий скорость уменьшения весов, принимает значение от 0 и до 1, чем меньше его значение тем больше влияние предыдущих значений на текущую величину среднего.

    Первое значение экспоненциального скользящего среднего, обычно принимается равным первому значению исходной функции:
    $ EMA_0 = p_0 $
    Ниже показано распределение весов при вычислении EMA c $alpha = 0.125$:
    #figure(image("pics/EMA.png", width: 40%))


  === Индикатор MACD

    MACD (Moving Average Convergence/Divergence) — это технический инструмент, помогающий оценивать силу тренда и определять потенциальные разворотные точки. Его разработал Джеральд Аппель, и в практике трейдинга он прижился как один из самых известных индикаторов на фондовых и валютных рынках. MACD строится на базе экспоненциальных скользящих средних (EMA) с разными периодами, что даёт возможность автоматически фиксировать моменты, когда цена переключается с восходящего на нисходящее движение (и наоборот).

    В классическом виде существует две основные разновидности: линейный MACD и MACD-гистограмма. Первый позволяет наблюдать пересечение двух кривых, указывающих на изменения тренда, а второй придаёт дополнительную наглядность, отображая разницу между этими линиями в виде столбиков (гистограммы).

    #figure(image("pics/MACD.gif", width: 60%))

    Чаще всего индикатор используют для выявления торговых сигналов при боковом движении цен — периоды стабилизации курса после повышения или понижения (консолидация).


    #text(style: "italic", weight: 600)[Линейный MACD]

      Вычисление начинается с трёх EMA с различными периодами. Две из них — «быстрая» ($EMA_s$) и «медленная» ($EMA_l$) — формируют основу MACD. «Быструю» EMA обычно берут с меньшим периодом (например, 12), а «медленную» — с более крупным (часто 26). Полученный показатель записывается как:

      $ MACD = EMA_s (P) − EMA_l (P) $

      Далее к результирующей кривой применяют ещё одну EMA, как правило с периодом 9, чтобы сгладить колебания и получить сигнальную линию (Signal):

      $ "Signal" = EMA_a (EMA_s (P) − EMA_l (P)) $

      Таким образом, в окне индикатора обычно видны две линии: основная (MACD) и сигнальная (Signal), а также горизонтальная нулевая отметка, вокруг которой они колеблются.

      #figure(image("pics/linear-MACD.png", width: 70%))


    #text(style: "italic", weight: 600)[MACD-гистограмма]
      При построении гистограммы MACD (MACD Histogram), столбики гистограммы показывают разность между линиями Signal и MACD, еще более упрощая восприятие индикатора. Однако, стоит упомянуть, что в некоторых торговых терминалах гистограмма MACD строится несколько по-другому. Столбики гистограммы могут заменять линию MACD, а сигнальная линия остается как есть. Тем не менее, в терминале Quik гистограмма обозначает именно схождение-расхождение линий.

      #figure(image("pics/MACD-combo.png", width: 70%))


     #text(style: "italic", weight: 600)[Использование MACD]

      Из приведённых формул следует, что если «быстрая» EMA располагается выше «медленной», значение MACD оказывается больше нуля, а при обратной ситуации — ниже нуля. Уровень и направление смещения этой линии относительно отметки 0 помогают судить о том, доминируют ли на рынке «быки» или «медведи».

      Максимальную эффективность MACD показывает, когда на рынке ярко выражена тенденция с широким диапазоном ценовых колебаний. При этом на узком рэндже индикатор может выдавать чаще ложные сигналы. Для практической работы MACD нередко используют на часовых и более крупных таймфреймах.

      Основные сигналы индикатора:
      - Пересечение линий
        Ключевой сигнал возникает, когда линия MACD пересекает сигнальную снизу вверх (обычно это рассматривают как указание на покупку). Если же пересечение идёт сверху вниз, можно расценивать это как рекомендацию к продаже.
        
      - Дивергенция

      Когда цена рисует новый экстремум, а линия MACD показывает противоположную динамику, это свидетельствует о затухании тренда и высокой вероятности движения в противоположную сторону.
      #figure(image("pics/div.png", width: 70%))


  === Волны Вульфа

    Волны Вульфа (Wolfe Waves) представляют собой характерный графический паттерн, указывающий на возможное формирование точки разворота цены. Название паттерна происходит от имени трейдера Билла Вульфа, который выделил закономерность в последовательности ценовых экстремумов, формирующих серию «волн». В классическом описании модель состоит из пяти волн, однако в некоторых источниках встречаются и четырехволновые варианты. В любом случае основная идея состоит в том, что с каждой следующей волной рынок постепенно теряет импульс в направлении текущего тренда, и после завершения финальной волны цена переходит к движению в обратном направлении.

    #text(style: "italic", weight: 600)[Ключевые компоненты паттерна]

    Первая волна задаёт исходный импульс, обычно совпадающий с началом ярко выраженного восходящего или нисходящего движения. Затем следует волна-коррекция, которая, не доходя до предыдущей цены, генерирует новый толчок в исходном направлении (это формирует вторую импульсную волну). После очередного отката возникает четвёртая волна, в которой часто и возникает точка входа — предполагаемый разворот.

    Для надёжной идентификации Волн Вульфа аналитики учитывают несколько факторов. Во-первых, важен сам характер экстремумов (локальные минимумы и максимумы должны располагаться так, чтобы визуально были различимы две коррекционные волны и две импульсные). Во-вторых, угол наклона connecting lines (линий, соединяющих ключевые экстремумы) должен указывать на постепенное затухание тренда. В-третьих, обязательно обращают внимание на объёмы: в фазе коррекции торговая активность чаще снижается, а во время импульсных рывков возрастает.

    #figure(image("pics/wolf.jpg", width: 70%))

    #text(style: "italic", weight: 600)[Алгоритмическая реализация]

    С программной точки зрения задача сводится к поиску локальных пиков и впадин и проверке ряда геометрических условий. Практический подход может выглядеть так:  
    - Сначала при помощи алгоритмов поиска экстремумов (например, функции find_peaks из библиотеки scipy.signal или простых эвристик) выделяются все потенциальные точки, где цена достигает локального максимума или минимума.  
    - Для каждой группы из четырёх либо пяти подряд идущих экстремумов оцениваются относительные уровни коррекции, угол наклона соединяющих линий и поведение объёмов на каждой стадии.  
    - Если совокупность параметров удовлетворяет установленным критериям (например, коррекционная волна достигает не более 61,8% предыдущего импульса, волна 3 длиннее волны 1, линия, построенная через определённые точки, должна пересекать цену в момент предполагаемого разворота, и т.д.), модель признаётся «Волнами Вульфа».

    Детальные числовые условия для принятия паттерна к торговле могут варьироваться. Одни трейдеры требуют строгого совпадения пропорций, другие допускают небольшие отклонения. Мягкие фильтры (допустим, отклонение до 10% от эталонных уровней Фибоначчи) помогают учесть реалии рынка, где линии редко бывают идеально точными.

    #text(style: "italic", weight: 600)[Использование в торговых стратегиях]

    После того как паттерн подтверждён, трейдеры обычно намечают «линию цели» (или линию 1-4, если речь о пятиволновой структуре), к которой, по теории Билла Вульфа, цена должна стремиться. Если предполагается, что паттерн указывает на бычий разворот, открывается длинная позиция рядом с точкой четвёртой волны; цель устанавливается около пересечения линии, соединяющей волны 1 и 4, с текущим рыночным временем. При медвежьем сценарии логика зеркально противоположна.

    Дополнительно часто учитывается поведение индикаторов вроде MACD, RSI или Ишимоку, которые могут подтвердить ослабление импульса и повысить надёжность сигнала. Точность прогнозирования возрастает, если в районе четвёртой волны наблюдается дивергенция между ценой и техническим осциллятором. Именно совокупная картина — волновая структура, поведение объёмов и сигналы других индикаторов — даёт больше шансов на то, что распознанный паттерн действительно приведёт к развороту тренда.

    #text(style: "italic", weight: 600)[Выводы о применимости метода]

    Волны Вульфа ценны тем, что часто формируются вблизи критических экстремумов рынка, когда идёт борьба между покупателями и продавцами. Однако надёжность паттерна напрямую зависит от правильной идентификации волн и от рыночного контекста: на длительных боковых участках или при резких новостных движениях модель может давать ложные сигналы. Поэтому в автоматизированном анализе полезно совмещать метод распознавания Волн Вульфа с фильтрами по волатильности, объёмам или фундаментальным событиям. В результате получается комплексная система, в которой волновая модель — лишь одна, хотя и важная, составляющая.

  #pagebreak()
  == Математические модели

    Прогнозирование котировок в проекте основывается не только на индикаторах, но и на строгих математических методах — от статистического анализа волатильности до моделей распределения активов. Такой комплексный подход позволяет перейти от визуальной оценки графиков к количественному обоснованию торговых решений.



    === Модель Блека-Литтермана
      Модель Блэка-Литтермана представляет собой современный метод оптимизации инвестиционного портфеля, который преодолевает ключевые недостатки классической теории Марковица. Разработанная экономистами Goldman Sachs в 1990-х годах, эта модель предлагает элегантный способ сочетания объективных рыночных данных с субъективными взглядами инвестора.

  #text(style: "italic", weight: 600)[Философия модели]

  В основе модели лежит глубокая идея о том, что текущие рыночные цены уже содержат в себе коллективную мудрость всех участников рынка. Вместо того чтобы полагаться исключительно на исторические данные, которые часто оказываются ненадёжными, модель использует рыночную капитализацию активов как отправную точку. Однако её истинная ценность заключается в возможности интегрировать частные прогнозы инвестора, сохраняя при этом связь с рыночным равновесием.

  #text(style: "italic", weight: 600)[Математический аппарат]

  Модель начинается с вычисления подразумеваемых доходностей через обратную оптимизацию рыночного портфеля. Эти расчёты основаны на предположении, что текущие рыночные веса оптимальны в рамках модели CAPM. Когда инвестор формулирует свои взгляды — будь то абсолютные прогнозы по отдельным активам или относительные ожидания — модель использует байесовский подход для их гармоничного объединения с рыночными данными.

  Ключевая формула модели представляет собой взвешенное среднее между рыночными подразумеваемыми доходностями и инвесторскими прогнозами, где веса определяются степенью уверенности в каждом из источников информации. Этот подход позволяет избежать радикальных перекосов в распределении активов, характерных для традиционных методов оптимизации.

  #text(style: "italic", weight: 600)[Практическое применение в торговых стратегиях]

  Стратегия тактического распределения активов
  На практике модель Блэка-Литтермана особенно полезна для инвесторов, которые хотят систематически отклоняться от рыночного индекса, сохраняя при этом разумный уровень риска. Например, управляющий фондом может использовать модель для ежеквартальной корректировки портфеля, постепенно увеличивая вес тех активов, по которым у него есть обоснованные положительные ожидания.

  #text(style: "italic", weight: 600)[Относительные торговые идеи]

  Особую силу модель демонстрирует при работе с парными активами или секторами. Если аналитик убеждён, что одна акция переоценена относительно другой в рамках одной отрасли, модель позволяет количественно выразить эту уверенность и точно определить, насколько следует скорректировать веса портфеля.

  #text(style: "italic", weight: 600)[Контроль риска]

  Важнейшее преимущество модели — встроенный механизм контроля риска. В отличие от простых стратегий следования тренду, которые могут приводить к опасной концентрации капитала, подход Блэка-Литтермана автоматически ограничивает размер позиций в соответствии с заданной инвестором уверенностью в своих прогнозах.
  Ограничения и предостережения

  #text(style: "italic", weight: 600)[Заключение]

  Модель Блэка-Литтермана остаётся золотым стандартом для инвесторов, которые хотят сочетать системный подход с возможностью учитывать свои уникальные рыночные инсайты. Она предлагает разумный компромисс между пассивным инвестированием и агрессивными спекулятивными стратегиями, делая процесс управления портфелем одновременно более научным и более интуитивно понятным. Для практического использования модели особенно важно развивать навыки чёткой формализации своих инвестиционных идей и регулярного пересмотра исходных предположений.


    === Метод скользящих окон

    Метод скользящих окон представляет собой мощный инструмент для анализа временных рядов, который особенно востребован в алгоритмической торговле. Его суть заключается в последовательном рассмотрении ограниченных временных отрезков данных, что позволяет адаптироваться к изменяющимся рыночным условиям. В отличие от анализа всего исторического периода целиком, этот подход обеспечивает актуальность выводов и помогает избежать устаревших закономерностей.

     #text(style: "italic", weight: 600)[Философия метода]

    Скользящее окно — это динамическая рамка анализа, которая перемещается во времени, охватывая только последние N периодов. Такой подход имитирует реальное поведение трейдеров, которые обычно принимают решения на основе актуальной информации, а не всей истории рынка. Метод особенно эффективен на нестационарных рынках, где статистические свойства данных со временем меняются. Главное преимущество — способность улавливать текущие тренды и паттерны, отфильтровывая устаревшие сигналы.

     #text(style: "italic", weight: 600)[Техническая реализация]

    На практике метод реализуется через последовательное применение аналитических процедур к ограниченным подмножествам данных. Например, при ежедневном обновлении окна старые данные исключаются по мере поступления новых. Ширина окна — критический параметр: слишком узкое окно приведет к избыточной чувствительности к шуму, а слишком широкое — к запаздывающей реакции на изменения. Оптимальный размер обычно подбирается эмпирически для каждого инструмента и таймфрейма, учитывая волатильность и ликвидность актива.

     #text(style: "italic", weight: 600)[Торговая стратегия на основе скользящих окон]

    Адаптивная трендовая стратегия использует скользящие окна для динамического расчета индикаторов. Например, вместо стандартной 200-дневной скользящей средней применяется средняя, рассчитанная по окну переменной длины, определяемой текущей волатильностью рынка. Когда рынок становится более изменчивым, окно автоматически сужается для быстрого реагирования, а в периоды затишья — расширяется для фильтрации ложных сигналов.

    Статистический арбитраж также выигрывает от этого подхода. Корреляция между парой активов вычисляется в скользящем окне, что позволяет вовремя обнаруживать распад исторических взаимосвязей. Торговая система открывает позиции, когда текущее отклонение от средней корреляции превышает адаптивные пороговые значения, рассчитанные на основе недавней волатильности.
    
    === Параболик SAR
    Параболический SAR представляет собой технический индикатор, разработанный для идентификации точек разворота ценового тренда. Его ключевая особенность заключается в алгоритме автоматической адаптации к изменяющейся рыночной волатильности, что делает его особенно полезным инструментом для трейдеров, работающих в условиях выраженных трендов.

    Философия метода основана на концепции следования за трендом с использованием прогрессивного стоп-уровня. В отличие от статических уровней поддержки и сопротивления, параболический SAR динамически корректирует свое положение в зависимости от текущей рыночной динамики. При восходящем тренде индикатор располагается ниже ценовых баров, последовательно повышаясь и выполняя функцию trailing stop. В случае нисходящего тренда точки индикатора находятся выше цены, постепенно снижаясь. Такой подход позволяет систематически фиксировать прибыль по мере развития тренда, одновременно ограничивая потенциальные убытки при его развороте.

    Механизм расчета индикатора включает два ключевых параметра: начальный коэффициент ускорения и его максимальное значение. Эти параметры определяют чувствительность индикатора к изменениям цены. При формировании каждого нового экстремума коэффициент ускорения увеличивается, что приводит к более быстрому приближению уровня SAR к текущей цене. Это создает эффект "притяжения" стоп-уровня к рынку, особенно заметный в условиях сильного тренда.

    Основное применение параболического SAR заключается в определении моментов сохранения существующей позиции или ее переворота. Когда цена пересекает уровень SAR снизу вверх, это интерпретируется как сигнал к закрытию длинной позиции и возможному открытию короткой. Обратная ситуация возникает при пересечении сверху вниз. Важно отметить, что данный метод не пытается предсказать начало тренда, а скорее обеспечивает механизм своевременного реагирования на уже сформировавшееся движение.

    Эффективность параболического SAR существенно зависит от рыночных условий. На трендовых рынках с четко выраженными движениями индикатор демонстрирует высокую результативность, позволяя участвовать в значительной части ценового движения. Однако в периоды бокового движения или высокой волатильности метод может генерировать серии ложных сигналов, что требует дополнительных фильтров или временного отказа от его использования.

    Для повышения надежности сигналов многие трейдеры комбинируют параболический SAR с другими индикаторами, такими как скользящие средние или осцилляторы. Например, принимаются только те сигналы SAR, которые соответствуют направлению тренда, определенному по скользящим средним. Также распространена практика использования временного фильтра, когда сигнал считается действительным только при его подтверждении в течение нескольких периодов.

    С точки зрения управления капиталом, параболический SAR предоставляет встроенный механизм контроля риска. Расстояние между текущей ценой и уровнем SAR естественным образом определяет потенциальный убыток по сделке, что позволяет рассчитывать размер позиции в соответствии с выбранной стратегией риск-менеджмента. В условиях повышенной волатильности это расстояние увеличивается, автоматически приводя к уменьшению объема позиции.

    Современные модификации метода включают адаптивные версии индикатора, где параметры расчета автоматически корректируются в зависимости от текущей рыночной волатильности. Некоторые реализации используют машинное обучение для оптимизации коэффициентов ускорения на различных рыночных фазах. Такие усовершенствования позволяют сохранить базовые принципы метода при одновременном повышении его адаптивности к изменяющимся рыночным условиям.

    #pagebreak()

  = Техническая реализация проекта




  == Структура прогрммы
  Программа состоит из четырех модулей: загрузки и предобработки данных, технического анализа, математических моделей, визуализации и отчетности. Каждый из них будет подробно описан далее. Такое разделение обеспечивает:
  + Четкость архитектуры - каждый модуль отвечает за конкретную задачу, что упрощает разработку и отладку.
  + Гибкость модернизации - возможность в будущем добавлять новые функции (например, ML-модели или интеграции с API) без переписывания всей системы.
  + Удобство тестирования - модули можно проерять независимо друг от друга.





  === Модуль загрузки и предобработки данных
    Модуль загрузки и предобработки данных обеспечивает получение информации из внешних источников (Yahoo Finance, Alpha Vantage) и локальных файлов. Он выполняет очистку данных, устраняя пропуски и аномалии, приводит информацию к стандартному формату и организует ее хранение. Для работы с данными используются библиотеки pandas и numpy.

  === Модуль технического и математического анализа
    Модуль технического анализа содержит набор инструментов для исследования рыночной динамики. В нем реализованы основные категории индикаторов: трендовые, осцилляторы, объемные показатели. Модуль поддерживает комбинирование сигналов от разных индикаторов и автоматическое определение ключевых уровней. Реализация основана на библиотеке TA-Lib и собственных алгоритмах.
  === Модуль математических моделей
    Модуль математических моделей предоставляет методы для углубленного анализа. Включает инструменты портфельной оптимизации (Black-Litterman, MPT), модели оценки волатильности (GARCH) и методы управления рисками. Для расчетов используются научные библиотеки scipy и statsmodels.
  === Модуль визуализации и отчетности
  Модуль визуализации и отчетности формирует графическое представление результатов анализа и готовые отчеты. Поддерживает построение различных типов графиков (свечные, линейные, тепловые карты) и автоматическую генерацию отчетов в форматах PDF и Excel. Для визуализации применяются библиотеки Matplotlib и Plotly.



#text(style: "italic", weight: 600)[Сценарий работы и логика взаимодействия модулей]

После того как модули распределены по функциональности, возникает необходимость в понятном сценарии их совместной работы. На практике это означает, что пользователь (или внешний скрипт) вначале запускает загрузку данных, указывает путь к файлу или идентификатор инструмента на финансовом API, а затем передаёт полученный DataFrame в модули анализа. На этапе предобработки данные очищаются от пропусков и аномалий, могут быть сгруппированы по требуемому таймфрейму (дневному, часовому или минутному), а также дополнены расчетными столбцами — например, средними значениями за последние N периодов.

По окончании первичной очистки пользователю доступны функции модуля технического анализа. Именно здесь рассчитываются основные индикаторы: SMA, EMA, MACD и Ишимоку, а также дополнительные сигналы вроде пробоя уровня поддержки или сопротивления. Чтобы взаимодействие оставалось простым и единообразным, все результаты вычислений сохраняются в том же DataFrame, но добавляются в виде новых столбцов. Такой подход позволяет легко фильтровать и сортировать строки по тем или иным индикаторам, искать сигналы пересечения и находить моменты дивергенции.

Модуль математических моделей встроен таким образом, что его можно подключать по желанию — например, когда нужно оценить распределение доходностей, провести портфельную оптимизацию или протестировать какие-то статистические гипотезы (например, о стационарности ряда или наличии авторегрессии). В базовой конфигурации пользователю достаточно механизма технического анализа и визуализации. Однако, если интересует более глубокий прогноз, то именно блок математических моделей предоставляет инструменты, такие как регрессионные методы, GARCH для оценки волатильности или модель Блека–Литтермана для комбинирования субъективных взглядов инвестора с рыночным равновесием.

Когда расчёты завершены, система переходит к этапу визуализации и формирования отчётности. На этом шаге пользователь определяет, какие именно графики ему требуются: сводные (свечные) диаграммы с наложенными индикаторами, линейные графики с SMA и MACD, либо отдельные диаграммы для наглядной оценки разных аспектов поведения рынка. Сформированные визуальные материалы могут быть сохранены в виде изображений (PNG, JPEG) или генерироваться динамически (через библиотеки Plotly или Bokeh) для веб-приложений. Параллельно может создаваться текстовый отчёт, который в структурированном виде фиксирует все вычисленные показатели: от значения скользящих средних до точек, где линии MACD пересекались или давали сигнал на покупку/продажу. Это позволяет исследователям или трейдерам документировать результаты за любой промежуток времени и при необходимости возвращаться к ним в будущем, чтобы сопоставить фактическое движение цены с тем, что прогнозировали индикаторы.

В результате такого подхода программа получается модульной, но при этом единой с точки зрения потока данных: всё строится вокруг исходного и обогащённого DataFrame. Это упрощает добавление новых методов анализа или подключение внешних сервисов. Например, если потребуются дополнительные индикаторы (RSI, Stochastic Oscillator и другие), их можно написать в отдельном файле и просто импортировать в проект. То же самое справедливо и для более сложных математических моделей: при необходимости их алгоритмы могут быть внесены в существующий блок без нарушения общей структуры работы.

Таким образом, техническая реализация ориентирована на гибкость и расширяемость: пользователь может остановиться на базовом анализе или же углубиться в сложные расчёты, сохранив единый формат данных и единый программный интерфейс. Благодаря такой организации кода система не только справляется с классическим набором задач (загрузка, вычисление индикаторов, визуализация), но и становится платформой, на базе которой легко экспериментировать с новыми идеями и инструментами для анализа финансовых рынков.



]

#pagebreak()



= Оценка результатов

#text(style: "italic", weight: 600)[Точность расчёта индикаторов]

В ходе тестирования программного комплекса на исторических данных было подтверждено, что вычисления основных технических индикаторов (SMA, EMA, MACD и Ишимоку) дают результаты, согласующиеся со значениями, получаемыми в популярном аналитическом ПО. Для проверки корректности использовались данные по акциям нескольких крупных компаний за период в несколько лет. Различия между показателями, рассчитанными в разрабатываемой системе и эталонными значениями, не превышали статистически незначимых погрешностей. Это свидетельствует о корректной имплементации математических формул и алгоритмов сглаживания в Python.

#text(style: "italic", weight: 600)[Производительность и масштабируемость]

Проведённые эксперименты показали, что модульная структура программы эффективно обрабатывает как исторические, так и оперативно поступающие котировки. При объёме данных порядка нескольких сотен тысяч записей (минутные интервалы за несколько лет) расчёт индикаторов выполнялся за считаные секунды. Это делает приложение масштабируемым и позволяет расширять его функции без угрозы существенного замедления, что особенно актуально при работе с большими объёмами финансовых данных или при параллельном анализе нескольких инструментов.

#text(style: "italic", weight: 600)[Удобство визуализации]

Реализованный модуль визуализации формирует наглядные графики, позволяющие эффективно сопоставлять ценовые ряды с линиями скользящих средних и другими индикаторами. Отдельно были проверены корректность наложения гистограммы MACD и сдвиг индикаторов Ишимоку относительно ценового графика. Благодаря гибкой настройке параметров построения, пользователь может концентрироваться на нужном масштабе, анализируя как краткосрочные колебания, так и долгосрочные тренды.

#text(style: "italic", weight: 600)[Применение к реальным торговым сценариям]

Апробация программы в условиях, приближенных к реальной торговле, подтвердила её практическую ценность. Трейдеры и аналитики, знакомые с базовыми приёмами технического анализа, могут быстро настроить расчёт интересующих их индикаторов и визуализировать динамику рынка. В частности, оперативное определение точек пересечения ценовых кривых и сигнальных линий MACD помогает принимать более обоснованные решения по входу или выходу из позиций. Дополнительные фильтры по объёму сделок и диапазону волатильности дают возможность повышать надёжность сигналов, избегая классических «ловушек» боковых движений рынка.

#text(style: "italic", weight: 600)[Выводы об эффективности решения]

Систематическая проверка модуля загрузки и предобработки данных подтвердила его надёжность в обработке пропусков и аномалий. Технический блок, в свою очередь, обеспечивает полноценный базовый инструментарий для анализа ценовых рядов. Совокупность полученных результатов указывает на то, что разработанное решение способно удовлетворить потребности как начинающих, так и более опытных участников рынка, нуждающихся в систематическом подходе к анализу котировок. В долгосрочной перспективе планируется расширять арсенал доступных методов и улучшать интеграцию с внешними источниками данных, чтобы ещё больше повысить точность и удобство работы. 

#pagebreak()

= Заключение

#text(style: "italic", weight: 600)[Соответствие целям проекта]

Разработанный программный комплекс, включающий в себя инструменты для загрузки, очистки и технического анализа данных, продемонстрировал полное соответствие первоначальным задачам. Удалось реализовать модульную архитектуру, что облегчает как интеграцию новых функций, так и поддержание кода в актуальном состоянии. С точки зрения функционала, программа корректно рассчитывает и визуализирует основные технические индикаторы, позволяя исследователям и трейдерам оперативно оценивать состояние рынка.

#text(style: "italic", weight: 600)[Практическая ценность]

Проведённое тестирование на реальных финансовых рядах подтвердило востребованность системы в реальном трейдинге и аналитике. Простота подключения к различным источникам котировок и гибкие механизмы предобработки данных делают решение удобным для повседневной работы. Итоговые отчёты и наглядные графики дают пользователям чёткую картину динамики цен, помогая принимать обоснованные решения в рамках торговых стратегий.

#text(style: "italic", weight: 600)[Дальнейшие направления развития]

Существующая платформа может быть усовершенствована за счёт расширения набора доступных инструментов технического анализа и включения модуля математических моделей. Интеграция методов машинного обучения и автоматизация процессов бэктестинга откроют возможности для более глубокого анализа данных и оптимизации торговых стратегий. Улучшение пользовательского интерфейса и подключение к брокерским API позволят применять систему не только для исследования рынка, но и для непосредственного открытия или закрытия сделок.

#text(style: "italic", weight: 600)[Общие выводы]

Результаты свидетельствуют о том, что созданное решение является полноценным стартовым продуктом для всестороннего анализа финансовых данных. При должном развитии и поддержке оно сможет удовлетворить требования как начинающих, так и профессиональных трейдеров, обеспечивая надёжные инструменты для ориентирования в постоянно меняющемся мире финансовых рынков.

#text()[]




#pagebreak()

= Перспективы развития проекта
#text()[
  Разработанный комплекс уже успешно решает задачи сбора, очистки и первичного технического анализа котировок, но дальнейшее его развитие способно существенно расширить сферы применения. В краткосрочной перспективе система может получить интеграцию с новыми рынками, включая криптовалюты и сырьевые товары, что позволит трейдерам работать в единой среде независимо от типа актива. Кроме того, добавление более продвинутых алгоритмов (например, машинного обучения) даст возможность автоматизировать выявление сложных паттернов и формирование прогнозов на основании больших объёмов исторических данных.

  Параллельно с этим можно углубить визуальный блок, предоставив интерактивные дашборды или веб-интерфейс, где пользователь будет настраивать метрики и параметры расчёта индикаторов буквально в пару кликов. Автоматизация генерации отчётов облегчит проведение регулярных бэктестов и сравнение исторической эффективности стратегий, а подключение к брокерским API сделает из проекта полноценный инструмент для алгоритмической торговли, способный в реальном времени анализировать рынок и совершать сделки по заранее заданным правилам. Подобное развитие открывает путь к созданию единого многофункционального приложения для анализа и управления инвестиционными активами.


]

#pagebreak()

= Список литературы
#text()[
  1. Мерфи, Дж. Технический анализ фьючерсных рынков [Текст] / пер. с англ. – Москва: Альпина Паблишер, 2022.  
  2. Хосода, Г. Ишимоку Кинко Хайо: Полное руководство [Текст] / Г. Хосода. – СПб.: Питер, 2019.  
  3. Колби, Р. Энциклопедия технических индикаторов рынка [Текст] / Р. Колби. – 2-е изд. – М.: Вильямс, 2020.  
  4. Фабоцци, Ф. Дж. Quantitative Equity Investing [Текст] / Ф. Дж. Фабоцци, С. Фок. – Нью-Йорк: Wiley, 2018.  
  5. Талеб, Н. Dynamic Hedging: Managing Vanilla and Exotic Options [Текст] / Н. Талеб. – Нью-Йорк: Wiley, 1997.  
  6. Наттенберг, Ш. Option Volatility and Pricing [Текст] / Ш. Наттенберг. – Нью-Йорк: McGraw-Hill, 2015.  
  7. Spilkin, E. High-Frequency Trading Models: Taking Algorithmic Trading to the Next Level [Текст] / E. Spilkin. – New York: Wiley, 2019.  
  8. Hamilton, J. D. Time Series Analysis [Текст] / J. D. Hamilton. – Princeton: Princeton University Press, 1994.  
  9. Yanasse, H. Machine Learning for Finance: Data Analysis, Algorithms, and Modeling Techniques [Electronic resource] / H. Yanasse. – Packt, 2021.  
  10. Документация TA-Lib [Электронный ресурс]. – https://mrjbq7.github.io/ta-lib/  
  11. Документация Pandas [Электронный ресурс]. – https://pandas.pydata.org/docs/  
  12. Документация Matplotlib [Электронный ресурс]. – https://matplotlib.org/stable/index.html  
  13. Статья о паттерне MACD  BCS-Express [Электронный ресурс]. – https://bcs-express.ru/novosti-i-analitika/indikator-macd-skol-ziashchie-srednie-v-udobnoi-upakovke  
  14. Статья об Ichimoku Binance Academy [Электронный ресурс]. – https://academy.binance.com/ru/articles/ichimoku-clouds-explained

]

